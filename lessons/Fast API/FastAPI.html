<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/advanced-python/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/advanced-python/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/advanced-python/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/advanced-python/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/advanced-python/images/favicon.ico"/><title>FAST API – Advanced Python</title><meta name="description" content="FAST API Introduction"/><meta name="keywords" content="your,Google,keywords,here"/><meta name="og:description" content="FAST API Introduction"/><meta name="og:title" content="FAST API – Advanced Python"/><meta name="og:image" content="/advanced-python/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/advanced-python/_next/static/css/abd5d72f1a23c91b.css" as="style"/><link rel="stylesheet" href="/advanced-python/_next/static/css/abd5d72f1a23c91b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/advanced-python/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/advanced-python/_next/static/chunks/webpack-43a960f752c780d8.js" defer=""></script><script src="/advanced-python/_next/static/chunks/framework-305cb810cde7afac.js" defer=""></script><script src="/advanced-python/_next/static/chunks/main-027b72302bea74e9.js" defer=""></script><script src="/advanced-python/_next/static/chunks/pages/_app-e1a3a0d5329ef7d1.js" defer=""></script><script src="/advanced-python/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-40e8b8a7fdfcf2e8.js" defer=""></script><script src="/advanced-python/_next/static/IaFelCunvDjZfaNDKtCIl/_buildManifest.js" defer=""></script><script src="/advanced-python/_next/static/IaFelCunvDjZfaNDKtCIl/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/advanced-python">Advanced Python</a></h1><div class="navbar-info"><a href="https://laitec.ir/" class="cta-btn">Register in Laitec</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>Here&#39;s an example of using FastAPI along with SQLAlchemy to create an endpoint that interacts with a PostgreSQL database to manage user information (username and password).</p>
<p>First, you&#39;ll need to set up your environment by installing the necessary packages:</p>
<pre><code class="language-bash">pip install fastapi uvicorn sqlalchemy databases[postgresql]
</code></pre>
<p>Here&#39;s the code for setting up FastAPI with SQLAlchemy to manage users:</p>
<pre><code class="language-python">from fastapi import FastAPI, HTTPException, Depends
from sqlalchemy import create_engine, Column, String
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker, Session
from typing import Optional

# Replace the database_url with your PostgreSQL database URL
DATABASE_URL = &quot;postgresql://username:password@localhost/db_name&quot;

# SQLAlchemy configurations
engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()

# Define User model
class User(Base):
    __tablename__ = &quot;users&quot;

    username = Column(String, primary_key=True, index=True)
    password = Column(String)

# Create tables in the database
Base.metadata.create_all(bind=engine)

app = FastAPI()

# Dependency to get the database session
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

# Create a new user
@app.post(&quot;/users/&quot;)
def create_user(username: str, password: str, db: Session = Depends(get_db)):
    hashed_password = password  # You should hash the password for security, not store it as plaintext
    db_user = User(username=username, password=hashed_password)
    db.add(db_user)
    db.commit()
    return {&quot;username&quot;: username}

# Get user details by username
@app.get(&quot;/users/{username}&quot;)
def get_user(username: str, db: Session = Depends(get_db)):
    user = db.query(User).filter(User.username == username).first()
    if user is None:
        raise HTTPException(status_code=404, detail=&quot;User not found&quot;)
    return user
</code></pre>
<p>Please note:</p>
<ul>
<li>Ensure to replace <code>DATABASE_URL</code> with your actual PostgreSQL database URL.</li>
<li>The code doesn&#39;t include password hashing for simplicity. In practice, you should always hash passwords before storing them in the database for security reasons.</li>
</ul>
<p>This code creates an API with two endpoints:</p>
<ul>
<li><code>POST /users/</code>: Create a new user by providing a username and password.</li>
<li><code>GET /users/{username}</code>: Retrieve user details by providing a username.</li>
</ul>
<p>Remember to handle password hashing, validation, authentication, and other security-related concerns based on your application&#39;s requirements before deploying this code to production.</p>
</div><div class="lesson-links"><a href="/advanced-python/lessons/AsyncIO/Introduction" class="prev">← Previous</a><a href="/advanced-python/lessons/Flask/Flask-Structure" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://github.com/pjsofts"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/pouria-jahandideh-879040157"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"FAST API","description":"FAST API Introduction"},"html":"\u003cp\u003eHere\u0026#39;s an example of using FastAPI along with SQLAlchemy to create an endpoint that interacts with a PostgreSQL database to manage user information (username and password).\u003c/p\u003e\n\u003cp\u003eFirst, you\u0026#39;ll need to set up your environment by installing the necessary packages:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003epip install fastapi uvicorn sqlalchemy databases[postgresql]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere\u0026#39;s the code for setting up FastAPI with SQLAlchemy to manage users:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-python\"\u003efrom fastapi import FastAPI, HTTPException, Depends\nfrom sqlalchemy import create_engine, Column, String\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker, Session\nfrom typing import Optional\n\n# Replace the database_url with your PostgreSQL database URL\nDATABASE_URL = \u0026quot;postgresql://username:password@localhost/db_name\u0026quot;\n\n# SQLAlchemy configurations\nengine = create_engine(DATABASE_URL)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\nBase = declarative_base()\n\n# Define User model\nclass User(Base):\n    __tablename__ = \u0026quot;users\u0026quot;\n\n    username = Column(String, primary_key=True, index=True)\n    password = Column(String)\n\n# Create tables in the database\nBase.metadata.create_all(bind=engine)\n\napp = FastAPI()\n\n# Dependency to get the database session\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Create a new user\n@app.post(\u0026quot;/users/\u0026quot;)\ndef create_user(username: str, password: str, db: Session = Depends(get_db)):\n    hashed_password = password  # You should hash the password for security, not store it as plaintext\n    db_user = User(username=username, password=hashed_password)\n    db.add(db_user)\n    db.commit()\n    return {\u0026quot;username\u0026quot;: username}\n\n# Get user details by username\n@app.get(\u0026quot;/users/{username}\u0026quot;)\ndef get_user(username: str, db: Session = Depends(get_db)):\n    user = db.query(User).filter(User.username == username).first()\n    if user is None:\n        raise HTTPException(status_code=404, detail=\u0026quot;User not found\u0026quot;)\n    return user\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePlease note:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eEnsure to replace \u003ccode\u003eDATABASE_URL\u003c/code\u003e with your actual PostgreSQL database URL.\u003c/li\u003e\n\u003cli\u003eThe code doesn\u0026#39;t include password hashing for simplicity. In practice, you should always hash passwords before storing them in the database for security reasons.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis code creates an API with two endpoints:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ePOST /users/\u003c/code\u003e: Create a new user by providing a username and password.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eGET /users/{username}\u003c/code\u003e: Retrieve user details by providing a username.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eRemember to handle password hashing, validation, authentication, and other security-related concerns based on your application\u0026#39;s requirements before deploying this code to production.\u003c/p\u003e\n","markdown":"\nHere's an example of using FastAPI along with SQLAlchemy to create an endpoint that interacts with a PostgreSQL database to manage user information (username and password).\n\nFirst, you'll need to set up your environment by installing the necessary packages:\n\n```bash\npip install fastapi uvicorn sqlalchemy databases[postgresql]\n```\n\nHere's the code for setting up FastAPI with SQLAlchemy to manage users:\n\n```python\nfrom fastapi import FastAPI, HTTPException, Depends\nfrom sqlalchemy import create_engine, Column, String\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker, Session\nfrom typing import Optional\n\n# Replace the database_url with your PostgreSQL database URL\nDATABASE_URL = \"postgresql://username:password@localhost/db_name\"\n\n# SQLAlchemy configurations\nengine = create_engine(DATABASE_URL)\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\nBase = declarative_base()\n\n# Define User model\nclass User(Base):\n    __tablename__ = \"users\"\n\n    username = Column(String, primary_key=True, index=True)\n    password = Column(String)\n\n# Create tables in the database\nBase.metadata.create_all(bind=engine)\n\napp = FastAPI()\n\n# Dependency to get the database session\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Create a new user\n@app.post(\"/users/\")\ndef create_user(username: str, password: str, db: Session = Depends(get_db)):\n    hashed_password = password  # You should hash the password for security, not store it as plaintext\n    db_user = User(username=username, password=hashed_password)\n    db.add(db_user)\n    db.commit()\n    return {\"username\": username}\n\n# Get user details by username\n@app.get(\"/users/{username}\")\ndef get_user(username: str, db: Session = Depends(get_db)):\n    user = db.query(User).filter(User.username == username).first()\n    if user is None:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    return user\n```\n\nPlease note:\n- Ensure to replace `DATABASE_URL` with your actual PostgreSQL database URL.\n- The code doesn't include password hashing for simplicity. In practice, you should always hash passwords before storing them in the database for security reasons.\n\nThis code creates an API with two endpoints:\n- `POST /users/`: Create a new user by providing a username and password.\n- `GET /users/{username}`: Retrieve user details by providing a username.\n\nRemember to handle password hashing, validation, authentication, and other security-related concerns based on your application's requirements before deploying this code to production.","slug":"FastAPI","title":"FAST API","section":"Fast API","icon":"info-circle","filePath":"/home/runner/work/advanced-python/advanced-python/lessons/04-Fast API/01-FastAPI.md","nextSlug":"/advanced-python/lessons/Flask/Flask-Structure","prevSlug":"/advanced-python/lessons/AsyncIO/Introduction"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"Fast API","slug":"FastAPI"},"buildId":"IaFelCunvDjZfaNDKtCIl","assetPrefix":"/advanced-python","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>